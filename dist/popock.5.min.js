(window["popock_jsonp"]=window["popock_jsonp"]||[]).push([[5],{4360:function(t,e,o){"use strict";var r=o("8bbf"),n=o.n(r),a=o("2f62"),i=(o("96cf"),o("1da1"));n.a.use(a["a"]);var l=solid.auth,s=new SolidFileClient(l),c={folder:{},file:null,content:null},u={setFolder:function(t,e){t.folder=e},setFile:function(t,e){t.file=e},setContent:function(t,e){t.content=e}},d={updateFolder:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,s.readFolder(e);case 2:r=o.sent,console.log(r),t.commit("setFolder",r);case 5:case"end":return o.stop()}}),o)})))()},updateFile:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("FILE",e),t.commit("setFile",e),o.t0=t,o.next=5,s.readFile(e.url);case 5:o.t1=o.sent,o.t0.commit.call(o.t0,"setContent",o.t1);case 7:case"end":return o.stop()}}),o)})))()}},f={namespaced:!0,state:c,actions:d,mutations:u};o("b0c0"),o("d3b7"),o("ddb0");n.a.use(a["a"]);var m=solid.auth,p=(new SolidFileClient(m),{profile:{webId:null,types:null}}),h={setProfile:function(t,e){console.log("mut",e),t.profile=e}},b={setWebId:function(t,e){return Object(i["a"])(regeneratorRuntime.mark((function o(){var r,n,a,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(console.log("action",e),r={},r.webId=e,null==e){o.next=16;break}return o.next=6,solid.data[e].storage;case 6:return n=o.sent,o.next=9,solid.data[e].name;case 9:return a=o.sent,o.next=12,solid.data[e].type.values;case 12:i=o.sent,r.storage="".concat(n),r.name="".concat(a),r.types="".concat(i);case 16:t.commit("setProfile",r);case 17:case"end":return o.stop()}}),o)})))()}},g={namespaced:!0,state:p,actions:b,mutations:h};n.a.use(a["a"]);e["a"]=new a["a"].Store({state:{},mutations:{},actions:{},modules:{storage:f,profile:g}})},"8ff7":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"webid"},[o("div",{staticClass:"explorer"},[o("b-input-group",{staticClass:"mt-3"},[o("b-input-group-prepend",[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.E-explorer",modifiers:{"E-explorer":!0}}],attrs:{variant:"info"}},[o("b-icon-folder2-open")],1)],1),o("b-form-input",{model:{value:t.folder.url,callback:function(e){t.$set(t.folder,"url",e)},expression:"folder.url"}})],1),o("b-modal",{attrs:{id:"E-explorer","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[o("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups and dropdown menu"}},[o("b-button-group",{staticClass:"mx-1"},[o("b-button",{attrs:{title:"New Folder",variant:"info"},on:{click:t.init_folder}},[o("b-icon-folder-plus")],1),o("b-button",{attrs:{title:"Upload Files",variant:"info"},on:{click:function(e){return t.$refs.fileInput.$el.childNodes[0].click()}}},[o("b-icon-files")],1),o("b-button",{attrs:{title:"Upload Folder",variant:"info"},on:{click:function(e){return t.$refs.folderInput.$el.childNodes[0].click()}}},[o("b-icon-folder-symlink")],1)],1)],1)]},proxy:!0}])},[o("b-list-group",["https://"!=t.folder.parent?o("b-list-group-item",{staticClass:"item",attrs:{href:"#",variant:"info"},on:{click:function(e){return t.updateFolder(t.folder.parent)}}},[o("b-button",{staticClass:"m-0 p-0",attrs:{variant:"info",size:"sm"}},[o("b-icon-arrow-up")],1),t._v(" "+t._s(t.folder.url)+" ")],1):o("b-list-group-item",{staticClass:"item",attrs:{href:"#",variant:"info"}},[t._v(" "+t._s(t.storage)+" ")]),o("div",[o("b-form-file",{ref:"fileInput",staticStyle:{display:"none"},attrs:{placeholder:"upload files","drop-placeholder":"Drop file here...",multiple:""},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),o("b-form-file",{ref:"folderInput",staticStyle:{display:"none"},attrs:{placeholder:"Upload directory","drop-placeholder":"Upoload directory",directory:"",multiple:""},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1)],1),o("b-list-group",{staticClass:"scroll"},[t._l(t.folder.folders,(function(e){return o("b-list-group-item",{key:e.name,staticClass:"item list-group-item d-flex justify-content-between p-1",attrs:{href:"#"},on:{click:function(o){return t.selected(e)},contextmenu:function(o){return o.preventDefault(),t.right(e)}}},[o("p",{staticClass:"p-0 m-0 flex-grow-1"},[o("b-button",{staticClass:"unstyled-button",attrs:{variant:"outline-warning"}},[o("b-icon-folder-fill")],1),t._v(" "+t._s(e.name))],1),o("b-button",{attrs:{size:"sm mr-2",variant:"outline-primary"}},[o("b-icon-alt",{attrs:{variant:"primary"},on:{click:function(o){return o.stopPropagation(),t.init_move(e)}}})],1),o("b-button",{attrs:{size:"sm",variant:"outline-danger"}},[o("b-icon-trash",{attrs:{variant:"danger"},on:{click:function(o){return o.stopPropagation(),t.init_trash(e)}}})],1)],1)})),t._l(t.folder.files,(function(e){return o("b-list-group-item",{key:e.name,staticClass:"item list-group-item d-flex justify-content-between",attrs:{href:"#"},on:{click:function(o){return t.selected(e)},contextmenu:function(o){return o.preventDefault(),t.right(e)}}},[o("p",{staticClass:"p-0 m-0 flex-grow-1"},[o("b-icon-file-text"),t._v(" "+t._s(e.name))],1),o("b-button",{attrs:{size:"sm mr-2",variant:"outline-primary",disabled:""}},[o("b-icon-download")],1),o("b-button",{attrs:{size:"sm mr-2",variant:"outline-primary"}},[o("b-icon-alt",{attrs:{variant:"primary"},on:{click:function(o){return o.stopPropagation(),t.init_move(e)}}})],1),o("b-button",{attrs:{size:"sm",variant:"outline-danger"}},[o("b-icon-trash",{attrs:{variant:"danger"},on:{click:function(o){return o.stopPropagation(),t.init_trash(e)}}})],1)],1)}))],2)],1),o("b-modal",{attrs:{id:"E-context-menu",title:t.contextTitle}},[o("b-list-group",[o("b-input-group",{attrs:{prepend:"Rename"}},[o("b-form-input",{model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1)],1)],1),o("b-modal",{attrs:{id:"E-confirm-trash",title:"Trash"},on:{ok:t.trash}},[t._v(" Are you sure you want to delete "),o("b-icon-trash",{attrs:{variant:"danger"}}),o("b",[t._v(t._s(t.currentItem.name))]),t._v(" ("+t._s(t.currentItem.type)+") "),o("b-icon-trash",{attrs:{variant:"danger"}}),t._v(" and all its content ? "),o("br"),o("small",[t._v(" "+t._s(t.currentItem.url)+" ")])],1),o("b-modal",{attrs:{id:"E-move",title:"Are you sure you want to move or rename"},on:{ok:t.move}},[t._v(" name : "+t._s(t.currentItem.name)+" "),o("br"),o("small",[t._v(" "+t._s(t.currentItem.url)+" ")]),o("b-input-group",{attrs:{size:"sm",prepend:"New location"}},[o("b-form-input",{model:{value:t.new_location,callback:function(e){t.new_location=e},expression:"new_location"}})],1)],1),o("b-modal",{attrs:{id:"E-folder-modal",title:"New Folder"},on:{ok:t.createFolder}},[o("b-input-group",{attrs:{size:"sm",prepend:"New Folder"}},[o("b-form-input",{model:{value:t.new_folder,callback:function(e){t.new_folder=e},expression:"new_folder"}})],1)],1)],1),o("fieldset",[t._v(" storage: "+t._s(t.storage)),o("br"),t._v(" folder: "+t._s(t.folder)+" ")]),t._v(" BASIC | NETWORK | DATA ")])},n=[],a=o("4360");const i=solid.auth,l=new SolidFileClient(i);var s={store:a["a"],name:"Storage",created(){this.storage=this.$store.state.profile.storage},data:function(){return{contextTitle:"",currentItem:{},newName:"",new_location:"",new_folder:"",files:[]}},methods:{selected(t){"folder"==t.type?this.$store.dispatch("storage/updateFolder",t.url):this.$store.dispatch("storage/updateFile",t)},init_folder(){this.$bvModal.show("E-folder-modal")},async createFolder(){if(console.log(this.new_folder),this.new_folder.length>0){let t=this.folder.url+this.new_folder;console.log(t),await l.itemExists(t)?alert(t+" already exists"):await l.createFolder(t),this.updateFolder(this.folder.url)}else alert("folder name can not be empty")},right(t){console.log("right",t),this.contextTitle=t.name,this.newName=t.name,this.$bvModal.show("E-context-menu"),this.currentItem=t},init_trash(t){console.log(t),this.$bvModal.show("E-confirm-trash"),this.currentItem=t},init_move(t){console.log(t),this.$bvModal.show("E-move"),this.currentItem=t,this.new_location=t.url},async move(){console.log("Move",this.currentItem.type,this.currentItem.url,"to",this.new_location);try{this.currentItem.type,await l.move(this.currentItem.url,this.new_location),this.updateFolder(this.folder.url)}catch(t){this.makeToast("Error",t,"danger")}},async trash(){console.log("Trash",this.currentItem.type,this.currentItem.url),"folder"!=this.currentItem.type?(await deleteFile(this.currentItem.url),console.log("File deleted !"),this.makeToast("success !","File deleted !","success")):await l.deleteFolder(this.currentItem.url),this.updateFolder(this.folder.url)},updateFolder(t){this.$store.dispatch("storage/updateFolder",t)}},watch:{async storage(){console.log("watch storage",this.storage),null!=this.storage?(this.folder=await l.readFolder(this.storage),console.log(this.folder)):this.folder=null},async files(t){console.log(t);let e=this.folder.url;console.log(e),await t.forEach((async function(t,o){console.log(t,o);let r=t.webkitRelativePath.length>0?e+t.webkitRelativePath:e+t.name;console.log(r,t,t.type),await l.createFile(r,t,t.type)})),this.updateFolder(this.folder.url)}},computed:{storage:{get:function(){return this.$store.state.profile.storage},set:function(){}},webId:{get:function(){return this.$store.state.profile.profile.webId},set:function(){}},folder:{get:function(){return this.$store.state.storage.folder},set:function(){}}}},c=s,u=o("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null,!0);e["default"]=d.exports}}]);
//# sourceMappingURL=popock.5.min.js.map