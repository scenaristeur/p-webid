(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group_create","chunk-2d0b2e88"],{"25b1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-create"},[n("b-modal",{attrs:{id:"new-group-modal",title:"New Group"},on:{ok:t.add}},[n("b-form-group",[n("label",{attrs:{for:"name"}},[t._v("Group Name")]),n("b-form-input",{attrs:{id:"name",placeholder:"ex: "+t.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("label",{attrs:{for:"purpose"}},[t._v("Group Purpose")]),n("b-form-input",{attrs:{id:"purpose",placeholder:"ex: Build Solid Cool apps..."},model:{value:t.purpose,callback:function(e){t.purpose=e},expression:"purpose"}}),void 0!=t.tension&&t.tension.length>0?n("div",[n("label",{attrs:{for:"parent"}},[t._v("Dedicated to ")]),n("b-form-input",{attrs:{id:"tension",placeholder:"attached to tension"},model:{value:this.tension,callback:function(e){t.$set(this,"tension",e)},expression:"this.tension"}})],1):t._e(),n("label",{attrs:{for:"parent"}},[t._v("Parent / Supercircle")]),n("b-form-input",{attrs:{id:"parent",placeholder:"ex: Supercircle"},model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}}),n("label",{attrs:{for:"url"}},[t._v("Group location")]),n("b-form-input",{attrs:{id:"url",placeholder:"ex: "+t.url},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1)],1)},r=[],o=(n("a15b"),n("b0c0"),n("ac1f"),n("5319"),n("498a"),n("96cf"),n("1da1")),i=n("4d8d"),s=n("6dc1"),c=n("4585"),u={name:"GroupCreate",mixins:[c["a"]],data:function(){return{name:"GroupCreate",purpose:"",parent:"",pubPod:"https://agora.solidcommunity.net/public/popock/inbox/",tension:"",url:""}},created:function(){void 0!=this.$route.params.tension&&(this.tension=this.$route.params.tension),console.log("TEnsion",this.tension),void 0!=this.tension&&this.tension.length>0&&(this.$bvModal.show("new-group-modal"),this.purpose="This group aims to treat "+this.tension),this.update()},watch:{$route:function(t){this.tension=t.params.tension,console.log("tension",this.tension),void 0!=this.tension&&this.tension.length>0&&(this.$bvModal.show("new-group-modal"),this.purpose="This group aims to treat "+this.tension)},currentWorkspace:function(){this.update()}},methods:{update:function(){void 0!=this.currentWorkspace.path&&"gouvernance"==this.currentWorkspace.name&&(console.log(this.currentWorkspace),this.url=this.currentWorkspace.path+"groups/")},add:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.name=t.name.trim(),n=t.name.replace(/\s/g,"_"),console.log(t.name,t.url),a=new Date,r=a.toISOString(),t.path=t.url+n+".ttl",console.log(t.path),e.next=9,Object(i["a"])(t.path);case 9:if(o=e.sent,c=o.addSubject({identifier:"this"}),c.addLiteral(s["g"].fn,t.name),c.addRef(s["c"].inbox,"./"+n+"/inbox/"),c.addLiteral(s["a"].created,r),c.addRef(s["b"].maker,t.webId),c.addRef(s["g"].hasMember,t.webId),c.addRef(s["g"].hasMember,"https://spoggy-test4.solidcommunity.net/profile/card#me"),c.addRef(s["g"].hasMember,"https://spoggy-test5.solidcommunity.net/profile/card#me"),c.addRef(s["g"].hasMember,"https://spoggy.solidcommunity.net/profile/card#me"),c.addRef(s["d"].type,t.currentWorkspace.path+"Group"),c.addRef(s["d"].type,s["g"].Group),c.addLiteral("http://www.w3.org/ns/org#purpose",t.purpose),c.addRef("http://www.w3.org/ns/org#subOrganizationOf",t.parent),!(void 0!=t.tension&&t.tension.length>0)){e.next=33;break}return c.addRef("https://www.w3.org/ns/activitystreams#object",t.tension+"#this"),c.addRef(s["b"].topic_interest,t.tension),e.next=28,Object(i["b"])(t.tension);case 28:return u=e.sent,d=u.getSubject(t.tension+"#this"),d.addRef("https://www.w3.org/ns/activitystreams#actor",t.path+"#this"),e.next=33,u.save();case 33:return e.next=35,o.save();case 35:t.$emit("created"),t.activity={"@context":["https://www.w3.org/ns/activitystreams",{org:"http://www.w3.org/ns/org#",purpose:{"@id":"org:purpose","@type":"@id"},subOrganizationOf:{"@id":"org:subOrganizationOf","@type":"@id"}}],summary:"will Be auto-generated",type:"Create",actor:{type:"webId",name:t.webId},object:{type:"Group",name:t.name,purpose:t.purpose,url:t.path+"#this",subOrganizationOf:t.parent}},t.activity.summary=[t.activity.actor.name,t.activity.type,"a",t.activity.object.type,"with name",t.activity.object.name].join(" "),console.log("ACTIVITY TO SEND",t.activity);case 39:case"end":return e.stop()}}),e)})))()},sendActivity:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),console.log(t.activity.actor.name,t.activity.type,t.activity.summary,t.date),n=new Date,a=t.formatDate(n),r=t.pubPod+a+".ttl",o="Activity_"+n.getTime(),c=n.toISOString(),u={},console.log(r),e.prev=9,e.next=12,Object(i["b"])(r);case 12:u=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](9),e.next=19,Object(i["a"])(r);case 19:u=e.sent;case 20:return console.log("webId",t.webId),d=u.addSubject({identifier:o}),d.addLiteral(s["e"].label,t.activity.object.name),d.addLiteral(s["a"].created,c),d.addRef(s["b"].maker,t.activity.actor.name),d.addRef("https://www.w3.org/ns/activitystreams#actor",t.activity.actor.name),d.addRef(s["d"].type,"https://www.w3.org/ns/activitystreams#"+t.activity.type),d.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),d.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),d.addRef(s["d"].type,t.currentWorkspace.path+t.activity.object.type),e.next=32,u.save();case 32:case"end":return e.stop()}}),e,null,[[9,15]])})))()}},computed:{webId:{get:function(){return this.$store.state.profile.profile.webId},set:function(){}},currentWorkspace:{get:function(){return this.$store.state.workspaces.currentWorkspace},set:function(){}}}},d=u,p=n("2877"),l=Object(p["a"])(d,a,r,!1,null,null,null);e["default"]=l.exports},4585:function(t,e,n){"use strict";n("99af"),n("a15b"),n("baa5"),n("ac1f"),n("8a79"),n("5319"),n("498a"),n("96cf");var a=n("1da1"),r={methods:{makeToast:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:n,solid:!0})}}},o=n("93ef"),i=n("9b92"),s=solid.auth,c=new SolidFileClient(s);e["a"]={mixins:[r],methods:{getStorage:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.url.endsWith("#this")?e.url:e.url+"#this",t.next=3,solid.data[n].storage;case 3:if(a=t.sent,console.log(a),void 0!=a){t.next=24;break}return r=e.url.substring(0,e.url.lastIndexOf("/")),t.next=9,solid.data[n].vcard$fn;case 9:return o=t.sent,s="".concat(o).trim().replace(/\s/g,"_"),console.log("".concat(o),e.url,s),a=[r,s,""].join("/"),console.log(a),t.next=16,!c.itemExists(e.storage);case 16:if(!t.sent){t.next=21;break}return t.next=19,c.createFolder(e.storage);case 19:t.next=22;break;case 21:case 22:return t.next=24,solid.data[n]["http://www.w3.org/ns/pim/space#storage"].set(Object(i["namedNode"])(a));case 24:return t.abrupt("return",a);case 25:case"end":return t.stop()}}),t)})))()},join:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("join to create inbox folder with authenticated agent as submitter"),n="@prefix :      <#> .\n      @prefix as:    <https://www.w3.org/ns/activitystreams#> .\n\n      :it\n      a as:Offer ;\n      as:actor <".concat(t.webId,'> ;\n      as:object :join ;\n      as:summary "').concat(t.webId,' asks to join the group" ;\n      as:target <').concat(t.invitation,"> .\n\n      :join\n      a as:Join ;\n      as:actor <").concat(t.webId,"> ;\n      as:object <").concat(t.invitation,'> ;\n      as:summary "').concat(t.webId,' joins group" .\n      '),e.prev=2,e.next=5,Object(o["f"])(t.inbox,new Blob([n],{type:"text/turtle"}));case 5:e.sent,t.makeToast("Join request sent","A request has been sent to group Inbox","success"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.makeToast("Join request","Can not send a request to the Group Inbox"+e.t0,"danger");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},accept:function(){console.log("todo accept"),this.makeToast("Todo","not implemented yet")},invite:function(){console.log("todo invite"),this.makeToast("Todo","not implemented yet")},reject:function(){console.log("todo reject"),this.makeToast("Todo","not implemented yet")}}}},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("d039"),o=n("e8b5"),i=n("861d"),s=n("7b0b"),c=n("50c4"),u=n("8418"),d=n("65f0"),p=n("1dde"),l=n("b622"),m=n("2d00"),h=l("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",g=m>=51||!r((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),w=p("concat"),v=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},y=!g||!w;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,a,r,o,i=s(this),p=d(i,0),l=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?i:arguments[e],v(o)){if(r=c(o.length),l+r>f)throw TypeError(b);for(n=0;n<r;n++,l++)n in o&&u(p,l,o[n])}else{if(l>=f)throw TypeError(b);u(p,l++,o)}return p.length=l,p}})},a15b:function(t,e,n){"use strict";var a=n("23e7"),r=n("44ad"),o=n("fc6a"),i=n("a640"),s=[].join,c=r!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(o(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=group_create.59fb9138.js.map