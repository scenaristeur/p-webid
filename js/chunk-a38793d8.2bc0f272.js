(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a38793d8"],{"25b1":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"group-create"},[r("b-modal",{attrs:{id:"new-group-modal",title:"New Group"},on:{ok:t.add}},[r("b-form-group",[r("label",{attrs:{for:"name"}},[t._v("Group Name")]),r("b-form-input",{attrs:{id:"name",placeholder:"ex: "+t.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("label",{attrs:{for:"purpose"}},[t._v("Group Purpose")]),r("b-form-input",{attrs:{id:"purpose",placeholder:"ex: Build Solid Cool apps..."},model:{value:t.purpose,callback:function(e){t.purpose=e},expression:"purpose"}}),void 0!=t.tension&&t.tension.length>0?r("div",[r("label",{attrs:{for:"parent"}},[t._v("Dedicated to ")]),r("b-form-input",{attrs:{id:"tension",placeholder:"attached to tension"},model:{value:this.tension,callback:function(e){t.$set(this,"tension",e)},expression:"this.tension"}})],1):t._e(),r("label",{attrs:{for:"parent"}},[t._v("Parent / Supercircle")]),r("b-form-input",{attrs:{id:"parent",placeholder:"ex: Supercircle"},model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}}),r("label",{attrs:{for:"url"}},[t._v("Group location")]),r("b-form-input",{attrs:{id:"url",placeholder:"ex: "+t.url},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1),r("a",{attrs:{href:t.url,target:"_blank"}},[t._v(t._s(t.url))])],1)},n=[],o=(r("a15b"),r("b0c0"),r("ac1f"),r("5319"),r("498a"),r("96cf"),r("1da1")),s=r("4d8d"),i=r("6dc1"),c={methods:{getGroup:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={members:[],subgroups:[]},e.next=3,Object(s["b"])(t);case 3:return a=e.sent,n=a.findSubject(),r.name=n.getLiteral(i["f"].fn),r.members=n.getAllRefs(i["f"].hasMember),r.purpose=n.getLiteral("http://www.w3.org/ns/org#purpose"),r.parent=n.getRef("http://www.w3.org/ns/org#subOrganizationOf"),r.subgroups=n.getAllRefs("http://www.w3.org/ns/org#hasSubOrganization"),o=a.findSubject("http://www.w3.org/ns/solid/terms#forClass","http://www.w3.org/ns/pim/meeting#LongChat"),null!=o&&(r.chat_instance=o.getRef("http://www.w3.org/ns/solid/terms#instance"),console.log("chat instance",r.chat_instance)),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))()},makeToast:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:r,solid:!0})}}},p={name:"GroupCreate",mixins:[c],data:function(){return{name:"GroupCreate",purpose:"",parent:"",pubPod:"https://agora.solidcommunity.net/public/popock/inbox/",tension:"",url:""}},created:function(){void 0!=this.$route.params.tension&&(this.tension=this.$route.params.tension),console.log("TEnsion",this.tension),void 0!=this.tension&&this.tension.length>0&&(this.$bvModal.show("new-group-modal"),this.purpose="This group aims to treat "+this.tension),this.update()},watch:{$route:function(t){this.tension=t.params.tension,console.log("tension",this.tension),void 0!=this.tension&&this.tension.length>0&&(this.$bvModal.show("new-group-modal"),this.purpose="This group aims to treat "+this.tension)},currentWorkspace:function(){this.update()}},methods:{update:function(){void 0!=this.currentWorkspace.path&&"gouvernance"==this.currentWorkspace.name&&(console.log(this.currentWorkspace),this.url=this.currentWorkspace.path+"groups/")},add:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o,c,p,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.name=t.name.trim(),r=t.name.replace(/\s/g,"_"),console.log(t.name,t.url),a=new Date,n=a.toISOString(),t.path=t.url+r+".ttl",console.log(t.path),e.next=9,Object(s["a"])(t.path);case 9:if(o=e.sent,c=o.addSubject({identifier:"this"}),c.addLiteral(i["f"].fn,t.name),c.addRef(i["c"].inbox,"./"+r+"/inbox/"),c.addLiteral(i["a"].created,n),c.addRef(i["b"].maker,t.webId),c.addRef(i["f"].hasMember,t.webId),c.addRef(i["f"].hasMember,"https://spoggy-test4.solidcommunity.net/profile/card#me"),c.addRef(i["f"].hasMember,"https://spoggy-test5.solidcommunity.net/profile/card#me"),c.addRef(i["f"].hasMember,"https://spoggy.solidcommunity.net/profile/card#me"),c.addRef(i["d"].type,t.currentWorkspace.path+"Group"),c.addRef(i["d"].type,i["f"].Group),c.addLiteral("http://www.w3.org/ns/org#purpose",t.purpose),c.addRef("http://www.w3.org/ns/org#subOrganizationOf",t.parent),!(void 0!=t.tension&&t.tension.length>0)){e.next=33;break}return c.addRef("https://www.w3.org/ns/activitystreams#object",t.tension+"#this"),c.addRef(i["b"].topic_interest,t.tension),e.next=28,Object(s["b"])(t.tension);case 28:return p=e.sent,u=p.getSubject(t.tension+"#this"),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.path+"#this"),e.next=33,p.save();case 33:return e.next=35,o.save();case 35:t.$emit("created"),t.activity={"@context":["https://www.w3.org/ns/activitystreams",{org:"http://www.w3.org/ns/org#",purpose:{"@id":"org:purpose","@type":"@id"},subOrganizationOf:{"@id":"org:subOrganizationOf","@type":"@id"}}],summary:"will Be auto-generated",type:"Create",actor:{type:"webId",name:t.webId},object:{type:"Group",name:t.name,purpose:t.purpose,url:t.path+"#this",subOrganizationOf:t.parent}},t.activity.summary=[t.activity.actor.name,t.activity.type,"a",t.activity.object.type,"with name",t.activity.object.name].join(" "),console.log("ACTIVITY TO SEND",t.activity);case 39:case"end":return e.stop()}}),e)})))()},sendActivity:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o,c,p,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),console.log(t.activity.actor.name,t.activity.type,t.activity.summary,t.date),r=new Date,a=t.formatDate(r),n=t.pubPod+a+".ttl",o="Activity_"+r.getTime(),c=r.toISOString(),p={},console.log(n),e.prev=9,e.next=12,Object(s["b"])(n);case 12:p=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](9),e.next=19,Object(s["a"])(n);case 19:p=e.sent;case 20:return console.log("webId",t.webId),u=p.addSubject({identifier:o}),u.addLiteral(i["e"].label,t.activity.object.name),u.addLiteral(i["a"].created,c),u.addRef(i["b"].maker,t.activity.actor.name),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.activity.actor.name),u.addRef(i["d"].type,"https://www.w3.org/ns/activitystreams#"+t.activity.type),u.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),u.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),u.addRef(i["d"].type,t.currentWorkspace.path+t.activity.object.type),e.next=32,p.save();case 32:case"end":return e.stop()}}),e,null,[[9,15]])})))()}},computed:{webId:{get:function(){return this.$store.state.profile.profile.webId},set:function(){}},currentWorkspace:{get:function(){return this.$store.state.workspaces.currentWorkspace},set:function(){}}}},u=p,d=r("2877"),l=Object(d["a"])(u,a,n,!1,null,null,null);e["default"]=l.exports},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),o=r("fc6a"),s=r("a640"),i=[].join,c=n!=Object,p=s("join",",");a({target:"Array",proto:!0,forced:c||!p},{join:function(t){return i.call(o(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=chunk-a38793d8.2bc0f272.js.map